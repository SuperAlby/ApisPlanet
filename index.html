<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accesso – ApisPlanet</title>
  <style>
    :root{--bg:#0f172a;--panel:#111827;--text:#e5e7eb;--muted:#94a3b8;--accent:#22c55e;--border:#1f2937;--card:#0b1220;--shadow:0 10px 30px rgba(0,0,0,.35);--radius:18px}
    *{box-sizing:border-box}
    body{margin:0;min-height:100svh;display:grid;place-items:center;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial;
      background: radial-gradient(1200px 800px at 80% -10%, rgba(59,130,246,.15), transparent 50%),
                  radial-gradient(900px 600px at -10% 20%, rgba(34,197,94,.12), transparent 40%), var(--bg);
      color:var(--text)}
    .card{width:min(520px,92vw);padding:28px;border:1px solid var(--border);border-radius:var(--radius);
      background:linear-gradient(180deg,rgba(255,255,255,.03),transparent),var(--card);box-shadow:var(--shadow)}
    .logo{width:82px;height:82px;margin:0 auto 12px auto;display:block}
    h1{margin:4px 0 18px 0;font-size:22px;text-align:center}
    label{display:block;margin:10px 0 6px 0;color:var(--muted);font-size:14px}
    input{width:100%;padding:14px 16px;border-radius:14px;border:1px solid var(--border);background:#0a1220;color:var(--text);outline:none;font-size:16px}
    .btn{width:100%;margin-top:16px;appearance:none;border:1px solid #14532d;border-radius:14px;padding:12px 16px;
      background:linear-gradient(180deg,#1f883d,#166534);color:white;cursor:pointer}
    .hint{margin-top:10px;color:var(--muted);text-align:center;font-size:13px}
    /* Rimosso .meta */
  </style>
</head>
<body>
  <div class="card">
    <svg class="logo" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <circle cx="32" cy="32" r="30" fill="#0b1220" stroke="#1f2937"/>
      <ellipse cx="32" cy="34" rx="16" ry="12" fill="#f59e0b" stroke="#1f2937"/>
      <path d="M16 34h32M16 30h32M16 38h32" stroke="#1f2937" stroke-width="3"/>
      <circle cx="23" cy="26" r="4" fill="#22c55e" stroke="#1f2937"/>
      <circle cx="41" cy="26" r="4" fill="#22c55e" stroke="#1f2937"/>
      <path d="M28 44c2 2 6 2 8 0" stroke="#94a3b8" stroke-width="3" stroke-linecap="round"/>
    </svg>
    <h1>ApisPlanet</h1>
    <form id="loginForm">
      <label>Nome utente</label>
      <input id="user" autocomplete="username" placeholder="api" />
      <label>Password</label>
      <input id="pass" type="password" autocomplete="current-password" placeholder="api" />
      <button class="btn" type="submit">Accedi</button>
    </form>
    <div class="hint">Demo: utente <b>api</b> · password <b>api</b></div>
    <div class="meta" style="margin-top:16px;">
      <span id="cfgInfo" style="color:#f87171;">⚠ TOKEN IN CODICE SORGENTE (RISCHIO SICUREZZA)</span>
    </div>
  </div>

  <script>
    const AUTH_KEY = 'auth.user';

    // ***************************************************************
    // *** INSERISCI QUI I TUOI DATI CLOUD (CON ENORME RISCHIO) ***
    // ***************************************************************
    const HARDCODED_GIST_ID = 'INSERISCI_QUI_IL_TUO_ID_GIST'; // <--- SOSTITUISCI
    const HARDCODED_TOKEN   = 'INSERISCI_QUI_IL_TUO_TOKEN_GITHUB'; // <--- SOSTITUISCI
    const DEFAULT_FILENAME  = 'apiari.json';
    // ***************************************************************

    // Funzione globale che restituisce SEMPRE i valori hardcoded
    window.getCloudConfig = function() {
      return {
        gistId: HARDCODED_GIST_ID,
        token:  HARDCODED_TOKEN,
        filename: DEFAULT_FILENAME
      };
    };

    (function(){
      const existing = localStorage.getItem(AUTH_KEY);
      
      const redirect = ()=>{
          const base = (new URL('.', location.href)).href;
          location.href = base + 'GestioneApiario.html'; // CORRETTO
      };

      if (existing === 'api') {
        // Logica di accesso semplificata
        redirect();
        return;
      }
      
      document.getElementById('loginForm').addEventListener('submit', (e)=>{
        e.preventDefault();
        const u = document.getElementById('user').value.trim();
        const p = document.getElementById('pass').value;
        
        if (u === 'api' && p === 'api') {
          localStorage.setItem(AUTH_KEY, 'api');
          redirect();
        } else {
          alert('Credenziali non valide. Usa utente "api" e password "api".');
        }
      });
    })();
  </script>
</body>
</html>
